#include <iostream>
#include "Dinamic.h"
#include "Dinamic.cpp"

using namespace std;

void menu()
{
	cout << endl << " Вывод меню" << endl;
	cout << endl << "Включить - 1" << endl;
	cout << "Выключить - 2" << endl;
	cout << "Увеличить громкость - 3" << endl;
	cout << "Уменьшить громкость - 4" << endl;
	cout << "Показать время работы аккумулятора - 5" << endl;
	cout << "Показать заряд аккумулятора - 6" << endl;
	cout << endl << "Введите номер команды>";
}
int main()
{
	Dinamic Dic;
	int work = 1, command, i = 0, cop = 0, vol = 0, a = 0, sch = 0, b = 0;
	string status = "";

	while (work)
	{
		menu();
		cin >> command;

		switch (command)
		{
		case 1:
			cop = 1;
			status = "Устройство Включено!";
			break;
		case 2:
			if (cop == 1)
			{
				cop = 0;
				status = "Устройство выключено!";
			}
			else status = "Устройство уже выключено!";
			break;

		case 3:
			Dic.get_volume(vol);
			a = 0;
			Dic.get_a(a);

			if (vol == 100) status = "Макс. Громкость!";
			else 
			{
				vol++;
				std::cout << "Громкость " << vol << std::endl;
			}
			sch++;
			if (sch % 2 == 1) b++;
			Dic.get_min(b);
			break;
		case 4:
			Dic.get_volume(vol);
			a = 1;
			Dic.get_a(a);
			if (vol == 0) status = "Громкость 0";
			else {
				vol--;
				std::cout << "Громкость " << vol << std::endl;
			}
			sch++;
			if (sch % 2 == 1) b++;
			Dic.get_min(b);
			break;
		case 5:
			std::cout << "Устройство будет работать " << Dic.get_timeWork() << " часов" << std::endl;
			break;
		case 6:
			std::cout << "Заряд батареи " << Dic.get_BatCap() << "" << std::endl;
			break;
		}

		cout << status;

		if (Dic.get_BatCap() == 15) std::cout << "Процент заряда батареи 15% Рекомендуем подключить зарядное устройство" << std::endl;
		if (Dic.get_BatCap() == 5) std::cout << "Процент заряда батареи 5% подключите зарядное устройство" << std::endl;
		if (Dic.get_BatCap() <= 0) work = 0;

		system("cls"); //очистка консоли
	}
	return 0;
}